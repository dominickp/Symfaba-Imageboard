{% extends "DominickImageboardBundle::layout.html.twig" %}

{% block title thread.subject %}

    {% block content_header '' %}

        {% block content %}

        {{ render(controller('DominickImageboardBundle:Reply:new', {'id': thread.id})) }}

        <div class="thread" id="{{thread.id}}">
            <img class="threadImage" src="{{ asset('img_data/thread/'~thread.image) }}">
            <div class="threadHeader">
                <a class="threadId" href="{{ path('imageboard_reply_new', {'id':thread.id}) }}">No.{{thread.id}}</a> // <span class="subject">{{thread.subject}}</span> <a class="btn btn-default replyButton" href="{{ path('imageboard_reply_new', {'id':thread.id}) }}"><span class="glyphicon glyphicon-comment"></span> Reply</a>
                <br>
                <span class="author">{{thread.user.getDisplayName}}</span>
                <span class="threadId">{{thread.created|date('m-d-Y G:iA')}}</span>
            </div>
            <p class="message">{{thread.message}}</p>

            {% for reply in replies %}
                <div class="reply">
                    {% if reply.image is not empty %}
                        <img class="replyImage" src="{{ asset('img_data/reply/'~reply.image) }}">
                    {% endif %}
                    <div class="replyHeader">
                        <span class="threadId">No.{{reply.id}}</span>
                        <span class="author">
                            {% if reply.user.getDisplayName is defined %}
                                {{reply.user.getDisplayName}}
                            {% else %}
                                Anonymous
                            {% endif %}
                        </span>
                        <span class="threadId">{{reply.created|date('m-d-Y G:iA')}}</span>
                        <span class="fileSize">{{ (reply.getSize/1024)|number_format(0) }} KB</span>
                    </div>
                    <p class="message">{{ reply.message }}</p>
                </div>
                <div class="clearfix"></div>
            {% endfor %}

            <div class="clearfix"></div>
        </div>
        {% endblock %}